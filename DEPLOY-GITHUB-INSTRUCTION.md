# Инструкция по деплою через GitHub на Vercel

## Подготовка репозитория

Мы уже подготовили репозиторий и создали ветку `fix-vercel-deploy` с исправлениями для успешного деплоя. Основные изменения:

1. Исправлен скрипт сборки в package.json (отключено автоматическое создание RSS при сборке)
2. Временно отключен `output: 'standalone'` в next.config.js
3. Добавлена поддержка внешних пакетов для серверных компонентов
4. Переименована директория `(main)` на `main-content` для избежания проблем с парсингом путей
5. Улучшена обработка ошибок и типизация в компонентах

## Шаги для деплоя через GitHub

### 1. Создание репозитория на GitHub

1. Перейдите на [GitHub](https://github.com/) и войдите в свой аккаунт
2. Нажмите "+" в правом верхнем углу и выберите "New repository"
3. Введите имя репозитория, например, `neuropolis-site`
4. Выберите "Private" для приватного репозитория (рекомендуется)
5. Нажмите "Create repository"

### 2. Связывание локального репозитория с GitHub

Выполните следующие команды в терминале, заменив `YOUR_USERNAME` на ваше имя пользователя GitHub и `neuropolis-site` на имя вашего репозитория:

```bash
git remote add origin https://github.com/YOUR_USERNAME/neuropolis-site.git
git branch -M main
git push -u origin fix-vercel-deploy
```

### 3. Настройка деплоя в Vercel

1. Перейдите на [Vercel](https://vercel.com/) и войдите в свой аккаунт
2. Нажмите "Add New..." и выберите "Project"
3. Подключите свой аккаунт GitHub, если это не было сделано ранее
4. Найдите репозиторий `neuropolis-site` в списке и нажмите "Import"
5. В настройках проекта:
   - Название проекта: `neuropolis` или другое желаемое имя
   - Framework Preset: `Next.js`
   - Переменные окружения: добавьте необходимые переменные окружения для Supabase и других сервисов

6. Дополнительные настройки:
   - В разделе "Build & Development Settings":
     - Build Command: `next build`
     - Output Directory: `.next`
     - Install Command: `npm install`
     - Development Command: `next dev`

7. Настройки для Node.js:
   - Node.js Version: 18.x или выше (рекомендуется 18.x для Next.js 14)

8. Нажмите "Deploy"

### 4. Дополнительные настройки (после успешного деплоя)

1. **Домены**: 
   - В разделе "Domains" вы можете настроить кастомные домены
   - Настройте перенаправления и SSL-сертификаты

2. **Аналитика**:
   - В разделе "Analytics" вы можете отслеживать производительность сайта

3. **Переменные окружения**:
   - Добавьте необходимые переменные окружения для полноценной работы функций:
     - `NEXT_PUBLIC_SUPABASE_URL`
     - `NEXT_PUBLIC_SUPABASE_ANON_KEY`
     - Другие необходимые переменные для интеграций

### 5. Проверка и диагностика

1. После деплоя убедитесь, что сайт корректно отображается и функционирует
2. Проверьте логи деплоя в разделе "Deployments" для выявления любых оставшихся проблем
3. Если возникают проблемы, вы можете вносить изменения в ветку `fix-vercel-deploy` и отправлять их на GitHub - Vercel автоматически запустит новый деплой

### 6. Постепенное восстановление функциональности

1. После успешного базового деплоя можно постепенно включать отключенные функции:
   - Восстановите генерацию RSS (создайте отдельный API-маршрут для этого)
   - Восстановите интеграцию с Supabase
   - Включите режим `output: 'standalone'` в next.config.js, если необходимо

2. Делайте изменения постепенно, проверяя работоспособность сайта после каждого изменения

## Полезные ссылки

- [Документация Vercel по деплою Next.js](https://vercel.com/docs/frameworks/nextjs)
- [Troubleshooting для Next.js на Vercel](https://vercel.com/guides/troubleshooting-nextjs)
- [Настройка переменных окружения в Vercel](https://vercel.com/docs/projects/environment-variables)
- [Документация по Next.js App Router](https://nextjs.org/docs/app) 